document.querySelector('input[name=ushare]').outerHTML=`<textarea style="
    height: 40vh;
" id="datlppp-input"></textarea><textarea style="
    height: 40vh;
" id="datlppp-output"></textarea>
<button onclick="(async ()=>{downloads = document.querySelector('#datlppp-input').value.split('\\n');_csrf = document.querySelector('[name=_csrf-app]').value;document.querySelector('#datlppp-status').innerText = 'Fshare - Start';for (let index = 0; index < downloads.length; index++) {  result = await fetch('https://www.fshare.vn/download/get', {    headers: {      accept: '*/*',      'content-type': 'application/x-www-form-urlencoded; charset=UTF-8',      'x-csrf-token': _csrf,    },    body:      '_csrf-app=' +      _csrf +      '&amp;linkcode=' +      downloads[index] +      '&amp;ushare=&amp;withFcode5=0',    method: 'POST',    mode: 'cors',    credentials: 'include',  }).then((_) => _.json());  document.querySelector('#datlppp-status').innerText =    'Got ' + (index + 1) + ' in ' + downloads.length;  downloads[index] = { id: downloads[index], ...result };}document.querySelector('#datlppp-output').value = downloads  .map(({ id, name, url }) => id + '\\t' + name + '\\t' + url + '\\n')  .join('');document.querySelector('#datlppp-status').innerText = 'Fshare - Done';})()">Run
</button><button onclick="function copyToClipboard(content) {var copyElement = document.createElement('textarea');copyElement.style.position = 'fixed';copyElement.style.opacity = '0';copyElement.textContent = content;var body = document.getElementsByTagName('body')[0];body.appendChild(copyElement);copyElement.select();document.execCommand('copy');body.removeChild(copyElement);};copyToClipboard(document.querySelector('#datlppp-output').value)">Copy</button>
<div id="datlppp-status">Fshare - Done</div>`
